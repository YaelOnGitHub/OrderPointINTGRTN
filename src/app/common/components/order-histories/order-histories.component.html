<section class="page-section">
  <div class="container">
    <form [formGroup]="filterForm!" (keydown.enter)="$event.preventDefault()">
      <div class="row">
        <div class="col-12 div-center">
          <div class="back">
            <a routerLink="../">
              {{ "common.back" | translate }}
            </a>
          </div>
          <div class="clear" *ngIf="haveFilter">
            <button class="btn btn-ti-outline" (click)="initialFilter()">
              {{ "orderHistory.clearFilter" | translate }}
            </button>
          </div>
        </div>
        <div class="col-12 col-xl-2">
          <div class="page-title">
            <h3>{{ "orderHistory.mainTitle" | translate }}</h3>
            <p>
              {{ totalItems ? totalItems : "NO" }}
              {{ "orderHistory.result" | translate }}
            </p>
          </div>
        </div>
        <div class="col-xl-6">
          <div class="show-order">
            <div class="o_title">
              {{ "orderHistory.filter.label" | translate }} :
            </div>

            <div
              class="group active"
              [class.active]="filterForm?.value.month === '3'"
            >
              <!-- <input type="radio" name="month_select"> -->
              <label for="month_select" (click)="filterhistory('3')"
                >3 {{ "orderHistory.filter.month" | translate }}</label
              >
            </div>
            <div class="group" [class.active]="filterForm?.value.month === '6'">
              <!-- <input type="radio" name="month_select"> -->
              <label for="month_select active" (click)="filterhistory('6')"
                >6 {{ "orderHistory.filter.month" | translate }}</label
              >
            </div>
            <div
              class="group"
              [class.active]="filterForm?.value.month === '12'"
            >
              <!-- <input type="radio" name="month_select"> -->
              <label for="month_select" (click)="filterhistory('12')"
                >12 {{ "orderHistory.filter.month" | translate }}</label
              >
            </div>
            <input
              class="custom-date"
              formControlName="selectDate"
              [(ngModel)]="selectedDate"
              (datesUpdated)="changeDate($event)"
              ngxDaterangepickerMd
              [linkedCalendars]="true"
              [placeholder]="'orderHistory.filter.customDate' | translate"
            />
            <!-- Custom Date -->
            <!-- </div> -->
          </div>
        </div>
        <div class="col-xl-4 filter">
          <div class="inner">
            <div class="search-details">
              <input
                type="text"
                [placeholder]="'orderHistory.searchPlaceholder' | translate"
                formControlName="search"
                (keydown)="filterHistoryKeyUpHandler($event)"
              />
              <!-- <img [src]="'assets/img/home/search.png'" alt="Search Icon" class="with-icon"> -->
              <svg
                class="with-icon"
                width="17"
                height="17"
                viewBox="0 0 17 17"
                fill="none"
                (click)="filterHistoryClickHandler($event)"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M16.7296 15.2779L10.9562 10.1815C10.821 10.0624 10.6859 9.94317 10.5561 9.81951C10.5392 9.80363 10.5223 9.78825 10.5054 9.77305C12.4715 7.43569 12.3551 3.94199 10.1552 1.74215C9.03956 0.626658 7.52648 0 5.94881 0C4.37113 0 2.85806 0.626658 1.74238 1.74215C-0.580792 4.06548 -0.580792 7.83218 1.74238 10.155C2.79448 11.2071 4.20264 11.8268 5.68912 11.8918C7.17561 11.9568 8.63249 11.4625 9.77244 10.5062C9.78747 10.5231 9.80268 10.54 9.81839 10.5555C9.93782 10.6812 10.053 10.8108 10.1677 10.9409L15.2778 16.7297C15.2963 16.7511 15.3161 16.7715 15.3369 16.7907C15.7047 17.1196 16.3375 17.0421 16.6897 16.6893C17.042 16.3371 17.1195 15.7043 16.7911 15.3365C16.7717 15.3158 16.7512 15.2963 16.7296 15.2779ZM2.33938 9.55817C1.8654 9.08418 1.48941 8.52148 1.23289 7.90219C0.976376 7.2829 0.844347 6.61915 0.844347 5.94883C0.844347 5.27851 0.976376 4.61476 1.23289 3.99547C1.48941 3.37618 1.8654 2.81348 2.33938 2.33949C2.81337 1.86551 3.37607 1.48952 3.99536 1.233C4.61465 0.976484 5.27841 0.844456 5.94872 0.844456C6.61904 0.844456 7.28279 0.976484 7.90208 1.233C8.52137 1.48952 9.08408 1.86551 9.55806 2.33949C10.032 2.81348 10.408 3.37618 10.6645 3.99547C10.9211 4.61476 11.0531 5.27851 11.0531 5.94883C11.0531 6.61915 10.9211 7.2829 10.6645 7.90219C10.408 8.52148 10.032 9.08418 9.55806 9.55817C9.08407 10.0322 8.52137 10.4081 7.90208 10.6647C7.28279 10.9212 6.61904 11.0532 5.94872 11.0532C5.27841 11.0532 4.61465 10.9212 3.99536 10.6647C3.37607 10.4081 2.81337 10.0322 2.33938 9.55817Z"
                  fill="#E65E1D"
                />
              </svg>
            </div>

            <button class="btn btn-ti-primary" (click)="filterOpen()">
              <img [src]="'assets/img/cart/filter.png'" alt="Filter Icon" />
              {{ "orderHistory.filter.title" | translate }}
            </button>
          </div>
        </div>
        <!-- <div class="col-12 col-xl-5">
               <div class="page-title">
                   <h3>ORDER HISTORY</h3>
               </div>
               </div>
               <div class="col-12 col-xl-5">
               <div class="page-title">
                   <h3>ORDER HISTORY</h3>
               </div>
               </div> -->
      </div>
    </form>
    <div
      class="row order-item"
      *ngFor="
        let item of orders | paginate: { 
			itemsPerPage: this.pageRequest.take,
			currentPage: this.pageRequest.page,
			totalItems: totalItems}">

      <div class="col-lg-10">
        <div class="card">
          <div class="row order-details">
            <div class="item">
              <span class="main_title"
                >{{ ("orderHistory.card.headers" | translate)[0] }} :</span
              >
              <span class="main_title"> {{ item.id ? item.id : "NA" }} </span>
            </div>
            <div class="item">
              <span class="tio_title">
                {{ ("orderHistory.card.headers" | translate)[1] }} :</span
              >
              <span class="tio_dec">
                {{ item.status ? item.status : "-" }}
              </span>
            </div>
            <div class="item">
              <span class="tio_title">
                {{ ("orderHistory.card.headers" | translate)[2] }} :</span
              >
              <span class="tio_dec">
                {{
                  item.orderedOn ? (item.orderedOn | date: "mediumDate") : "-"
                }}
              </span>
            </div>
            <div class="item">
              <span class="tio_title">
                {{ ("orderHistory.card.headers" | translate)[3] }} :</span
              >
              <span class="tio_dec"> {{ item.orderType ? (item.orderedForRepId ? 'For a Rep' : item.orderType) : "-" }} </span>
            </div>
            <div class="item">
              <span class="tio_title">
                {{ ("orderHistory.card.headers" | translate)[4] }} :</span
              >
              <span class="tio_dec">
                {{ item.numberOfItems ? item.numberOfItems : "" }}
              </span>
            </div>
          </div>
        </div>
      </div>
      <div class="col-lg-2">
        <div class="btn-list">
          <button class="btn btn-ti-primary" (click)="viewOrder(item.id)">
            {{ ("orderHistory.card.actionBtns" | translate)[0] }}
          </button>
          <button class="btn btn-ti-outline" (click)="trackOrderOpen(item.id)">
            {{ ("orderHistory.card.actionBtns" | translate)[1] }}
          </button>
          <button
            class="btn btn-ti-outline"
            (click)="reorder(item.id, item.orderType)"
          >
            {{ ("orderHistory.card.actionBtns" | translate)[2] }}
          </button>
        </div>
      </div>
    </div>
    <pagination-controls
      (pageChange)="getAllOrders(this.filterForm?.value,(this.pageRequest.page = $event))"
      previousLabel= "{{ 'paginationButtons.previous' | translate }}"
      nextLabel= "{{ 'paginationButtons.next' | translate }}"
      *ngIf="orders.length > 0 && !loading">
    </pagination-controls>
  </div>
</section>